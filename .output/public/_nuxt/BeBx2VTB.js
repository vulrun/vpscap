import{_ as Le}from"./CzZvajHs.js";import{_ as Re,a as Ve,b as Ie,L as He,A as me,B as fe,C as Pe,D as ge,E as _e,G as pe,u as Ee,k as Be,l as je,m as Ue,n as Ne,o as Oe,p as qe,q as Ke,X as Ge,c as We,d as Ze,e as X,f as Je,F as ie,g as Xe,h as re,i as Qe,j as Ye,H as et,x as ye,y as ve,w as tt,z as Q}from"./DuHPYbfw.js";import{O as at,I as st,c as U,_ as J,a as nt,v as K}from"./ujrmovv1.js";import{a as lt,b as ot,c as it,d as rt,_ as ct,R as dt}from"./BmZ2LAh1.js";import{k as he,i as q,c as g,o as r,u as e,q as ut,w as s,p as ee,v as O,D as be,d as a,l as mt,m as ft,g as h,a as H,b as k,f as L,x as gt,y as _t,z as pt,n as T,t as B,F as I,h as j,e as xe,r as yt,A as G,j as vt,E as P}from"./CQzfIEGG.js";import{o as ce,b as W,s as Z,e as de,D as Y,u as ht,t as bt,_ as xt,a as kt}from"./CVLgalrC.js";import{s as ue,m as wt,d as St}from"./BvUkXoQN.js";import{_ as Mt}from"./DzupHNbd.js";import{_ as Ct}from"./DikSbjVC.js";import{c as z}from"./C45a0SJ1.js";import{C as $t}from"./B8NiJcRH.js";import{_ as Dt}from"./BkNBrZT-.js";import{_ as Tt}from"./Dd8-9PBm.js";import{T as Ft,P as At}from"./CFHj_Oi1.js";import{S as zt}from"./CK6m6hm2.js";import"./ycHczuaS.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=z("binoculars",[["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3",key:"3apit1"}],["path",{d:"M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z",key:"rhpgnw"}],["path",{d:"M 22 16 L 2 16",key:"14lkq7"}],["path",{d:"M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z",key:"104b3k"}],["path",{d:"M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3",key:"14fczp"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=z("circle-fading-plus",[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=z("dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=z("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=z("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=z("folder-root",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M12 15v5",key:"11xva1"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=z("folder-symlink",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"x1c07l"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=z("repeat-1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=z("replace-all",[["path",{d:"M14 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"1yyzbs"}],["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"zfj4xr"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a 3 3 0 0 1 3-3h1",key:"1ageje"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=z("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=z("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=z("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=z("wifi-zero",[["path",{d:"M12 20h.01",key:"zekei9"}]]),Kt=he({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(o){const _=o,m=q(()=>{const{class:i,...l}=_;return l}),t=at(m);return(i,l)=>(r(),g(e(st),ut(e(t),{class:e(U)("text-sm text-muted-foreground",_.class)}),{default:s(()=>[ee(i.$slots,"default")]),_:3},16,["class"]))}}),Gt={class:"flex-1"},Wt=["innerHTML"],ke={__name:"Editor",props:["class","disabled","conf","asChild"],emits:["update:list"],setup(o,{emit:_}){var v,S,$,A,M,R,E,te,ae,se,ne,le,oe;const m=_,t=o,i=O(t==null?void 0:t.conf),l=!!((v=i==null?void 0:i.value)!=null&&v.confId),f=O([]),b=O(!1),y=O(!1),d=["serve","proxy","redirect"],w=ce({confType:de(d).describe("Configuration Type").default(d==null?void 0:d[0]),domain:Z().trim().describe("Domains & Aliases").refine(C=>ue(C).length,{message:"Domains must be in valid format"}),target:Z().trim().min(10).describe("Target Location"),enableIndexing:W().default(!1).describe("Enable Auto Indexing")}),F=ce({confType:de(d).describe("Configuration Type").default(d==null?void 0:d[0]),domain:Z().trim().describe("Domains & Aliases").refine(C=>ue(C).length,{message:"Domains must be in valid format"}),target:Z().trim().min(10).describe("Target Location"),enableIndexing:W().default(!1).describe("Enable Auto Indexing"),enableSSL:W().default(!1).describe("Enable SSL"),forceSSL:W().default(!1).describe("Force SSL")}),p=l?F:w,x=[{sourceField:"confType",targetField:"confType",type:Y.HIDES,when:()=>{var C;return(C=i==null?void 0:i.value)==null?void 0:C.isDefault}},{sourceField:"confType",targetField:"enableIndexing",type:Y.HIDES,when:C=>C!=="serve"},{sourceField:"enableSSL",targetField:"forceSSL",type:Y.HIDES,when:C=>C===!1}],n={enableIndexing:{component:"switch",label:(M=(A=($=(S=p==null?void 0:p._getCached())==null?void 0:S.shape)==null?void 0:$.enableIndexing)==null?void 0:A._def)==null?void 0:M.description},enableSSL:{component:"switch",label:(ae=(te=(E=(R=p==null?void 0:p._getCached())==null?void 0:R.shape)==null?void 0:E.enableSSL)==null?void 0:te._def)==null?void 0:ae.description},forceSSL:{component:"switch",label:(oe=(le=(ne=(se=p==null?void 0:p._getCached())==null?void 0:se.shape)==null?void 0:ne.forceSSL)==null?void 0:le._def)==null?void 0:oe.description}},c=ht({validationSchema:bt(p),validateOnMount:l,keepValuesOnUnmount:l});be(()=>{l&&c.resetForm({values:i==null?void 0:i.value})});async function u(C){var D;try{f.value=[],y.value=!0;const V={id:(D=i==null?void 0:i.value)==null?void 0:D.confId,...C},N=await _t(`/api/action/${l?"updateSite":"createSite"}`,{method:"POST",body:V});m("update:list"),pt((N==null?void 0:N.message)||N),await St(400),y.value=!1,b.value=!1}catch(V){y.value=!1,f.value=[V==null?void 0:V.message]}}return(C,D)=>{const V=J,N=lt,we=rt,Se=Kt,Me=it,Ce=Ve,$e=Ie,De=Re,Te=xt,Fe=ot,Ae=ct;return r(),g(Ae,{open:e(b),"onUpdate:open":D[0]||(D[0]=ze=>gt(b)?b.value=ze:null)},{default:s(()=>[a(N,mt(ft({class:t==null?void 0:t.class,disabled:t==null?void 0:t.disabled,asChild:t==null?void 0:t.asChild})),{default:s(()=>[ee(C.$slots,"default",{},()=>[a(V,{class:"ml-2",variant:"outline"},{default:s(()=>D[1]||(D[1]=[h("Add")])),_:1,__:[1]})])]),_:3},16),a(Fe,{class:"max-w-[95svw] max-h-[95svh] md:max-w-lg grid-rows-[auto_minmax(0,1fr)_auto]"},{default:s(()=>[a(Me,null,{default:s(()=>[a(we,{class:"font-semibold text-lg"},{default:s(()=>D[2]||(D[2]=[h("Add Site")])),_:1,__:[2]}),a(Se,{class:"hidden"},{default:s(()=>D[3]||(D[3]=[h("Description goes here")])),_:1,__:[3]})]),_:1}),a(Te,{class:"space-y-4",schema:e(p),"field-config":n,dependencies:x,form:e(c),onSubmit:u},{default:s(()=>[a(De,{class:"flex flex-row items-center gap-2"},{default:s(()=>[H("div",Gt,[e(y)?(r(),g(Ce,{key:0,delay:2e3,class:"font-medium lowercase text-sm text-green-700"})):e(f).length>0?(r(),k("span",{key:1,class:"font-medium text-sm text-red-600 text-justify",innerHTML:("markdownToHtmlLite"in C?C.markdownToHtmlLite:e(wt))(e(f).join(" "))},null,8,Wt)):L("",!0)]),a($e,{"as-child":""},{default:s(()=>[a(V,{type:"button",variant:"secondary",class:"w-20 border border-gray-300"},{default:s(()=>D[4]||(D[4]=[h("Close")])),_:1,__:[4]})]),_:1}),e(y)?(r(),g(V,{key:0,disabled:"",class:"w-20"},{default:s(()=>[a(e(He),{class:"size-6 animate-spin"})]),_:1})):(r(),g(V,{key:1,type:"submit",class:"w-20"},{default:s(()=>D[5]||(D[5]=[h("Save")])),_:1,__:[5]}))]),_:1})]),_:1},8,["schema","form"])]),_:1})]),_:3},8,["open"])}}},Zt=he({__name:"Badge",props:{variant:{},class:{}},setup(o){const _=o;return(m,t)=>(r(),k("div",{class:T(e(U)(e(Jt)({variant:m.variant}),_.class))},[ee(m.$slots,"default")],2))}}),Jt=nt("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),Xt={class:"hidden space-x-1 lg:flex"},Qt={__name:"DataFilters",props:["column","title","options"],setup(o){const _=o,m=q(()=>{var t;return new Set((t=_.column)==null?void 0:t.getFilterValue())});return(t,i)=>{const l=kt,f=Zt,b=J,y=me,d=Pe,w=ge,F=_e,p=fe,x=pe;return r(),g(x,null,{default:s(()=>[a(y,{"as-child":""},{default:s(()=>[a(b,{variant:"outline",size:"sm",class:"h-8 border-dashed"},{default:s(()=>[a(e(Rt),{class:"mr-2 h-4 w-4"}),h(" "+B(o.title)+" ",1),m.value.size>0?(r(),k(I,{key:0},[a(l,{orientation:"vertical",class:"mx-2 h-4"}),a(f,{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden"},{default:s(()=>[h(B(m.value.size),1)]),_:1}),H("div",Xt,[m.value.size>2?(r(),g(f,{key:0,variant:"secondary",class:"rounded-sm px-1 font-normal"},{default:s(()=>[h(B(m.value.size)+" selected",1)]),_:1})):(r(!0),k(I,{key:1},j(o.options.filter(n=>m.value.has(n.value)),n=>(r(),g(f,{key:n.value,variant:"secondary",class:"rounded-sm px-1 font-normal"},{default:s(()=>[h(B(n.label),1)]),_:2},1024))),128))])],64)):L("",!0)]),_:1})]),_:1}),a(p,null,{default:s(()=>[a(d,null,{default:s(()=>[h(B(o.title),1)]),_:1}),a(w),(r(!0),k(I,null,j(o.options,n=>(r(),g(F,{key:n==null?void 0:n.value,onClick:xe(c=>{var v;const u=typeof(n==null?void 0:n.value)=="string"?n==null?void 0:n.value:JSON.stringify(n==null?void 0:n.value);m.value.clear(),m.value.add(u),(v=o.column)==null||v.setFilterValue([...m.value])},["prevent"])},{default:s(()=>[H("div",{class:T(e(U)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",m.value.has(n==null?void 0:n.value)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},[a(e($t),{class:"h-4 w-4"})],2),n!=null&&n.icon?(r(),g(yt(n==null?void 0:n.icon),{key:0,class:"mr-2 h-4 w-4 text-muted-foreground"})):L("",!0),H("span",null,B(n==null?void 0:n.label),1)]),_:2},1032,["onClick"]))),128)),m.value.size>0?(r(),k(I,{key:0},[a(w),a(F,{value:{label:"Clear filters"},class:"justify-center text-center",onSelect:i[0]||(i[0]=n=>{var c;return(c=o.column)==null?void 0:c.setFilterValue(void 0)})},{default:s(()=>i[1]||(i[1]=[h("Clear filters")])),_:1,__:[1]})],64)):L("",!0)]),_:1})]),_:1})}}},Yt={class:"space-y-4"},ea={class:"flex items-center justify-between"},ta={class:"flex flex-1 items-center space-x-2"},aa={class:"rounded-md border"},sa={__name:"DataTable",props:["data","columns","sorting"],setup(o){const _=[{label:"Active",value:"1"},{label:"Disabled",value:"0"}],m=[{label:"Serve",value:"serve"},{label:"Proxy",value:"proxy"},{label:"Redirect",value:"redirect"}],t=o,i=G("sites-sorting",[].concat(t==null?void 0:t.sorting).filter(Boolean)),l=G("sites-pagination",{pageIndex:0,pageSize:20}),f=G("sites-globalFilter",""),b=G("sites-columnFilters",[]),y=G("sites-columnVisibility",{isActive:!1}),d=Ee({sortDescFirst:!0,get data(){return t.data},get columns(){return t.columns},state:{get sorting(){return i.value},get pagination(){return l.value},get globalFilter(){return f.value},get columnFilters(){return b.value},get columnVisibility(){return y.value}},getCoreRowModel:Ke(),getSortedRowModel:qe(),getExpandedRowModel:Oe(),getFilteredRowModel:Ne(),getPaginationRowModel:Ue(),getFacetedRowModel:je(),getFacetedUniqueValues:Be(),onSortingChange:n=>K(n,i),onPaginationChange:n=>K(n,l),onGlobalFilterChange:n=>K(n,f),onColumnFiltersChange:n=>K(n,b),onColumnVisibilityChange:n=>K(n,y)}),w=q(()=>d.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide())),F=q(()=>f.value.length>0||d.getState().columnFilters.length>0),p=q(()=>{const n=d.getRowModel().rows,c=n.filter(v=>v.original.confName==="_default.conf"),u=n.filter(v=>v.original.confName!=="_default.conf");return[...c,...u]});function x(){f.value="",d.resetColumnFilters()}return be(()=>{}),(n,c)=>{const u=Ct,v=Qt,S=J,$=We,A=Ye;return r(),k("div",Yt,[H("div",ea,[H("div",ta,[a(u,{placeholder:"search here...",class:"h-8 w-[150px] lg:w-[250px]","model-value":e(f)??"",onInput:c[0]||(c[0]=M=>f.value=String(M.target.value))},null,8,["model-value"]),e(d).getColumn("confType")?(r(),g(v,{key:0,title:"Type",column:e(d).getColumn("confType"),options:m},null,8,["column"])):L("",!0),e(d).getColumn("isActive")?(r(),g(v,{key:1,title:"Status",column:e(d).getColumn("isActive"),options:_},null,8,["column"])):L("",!0),e(F)?(r(),g(S,{key:2,variant:"ghost",class:"flex items-center h-8 px-2 lg:px-3 bg-accent text-accent-foreground border border-transparent hover:border-gray-400/80",onClick:x},{default:s(()=>[c[1]||(c[1]=h(" Reset ")),a(e(Ge),{class:"h-4 w-4"})]),_:1,__:[1]})):L("",!0)]),a($,{table:e(d)},null,8,["table"])]),H("div",aa,[a(e(Qe),null,{default:s(()=>[a(e(Ze),null,{default:s(()=>[(r(!0),k(I,null,j(e(d).getHeaderGroups(),M=>(r(),g(e(X),{key:M.id},{default:s(()=>[(r(!0),k(I,null,j(M.headers,R=>(r(),g(e(Je),{key:R.id},{default:s(()=>[R.isPlaceholder?L("",!0):(r(),g(e(ie),{key:0,render:R.column.columnDef.header,props:R.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(Xe),null,{default:s(()=>{var M;return[(M=e(p))!=null&&M.length?(r(!0),k(I,{key:0},j(e(p),R=>(r(),g(e(X),{key:R.id,"data-state":R.getIsSelected()&&"selected"},{default:s(()=>[(r(!0),k(I,null,j(R.getVisibleCells(),E=>(r(),g(e(re),{key:E.id,class:T(("cn"in n?n.cn:e(U))(E.column.columnDef.cellClass))},{default:s(()=>[a(e(ie),{render:E.column.columnDef.cell,props:E.getContext()},null,8,["render","props"])]),_:2},1032,["class"]))),128))]),_:2},1032,["data-state"]))),128)):(r(),g(e(X),{key:1},{default:s(()=>[a(e(re),{colspan:e(w).length,class:"aspect-video text-center"},{default:s(()=>c[2]||(c[2]=[h("No results.")])),_:1,__:[2]},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),a(A,{table:e(d)},null,8,["table"])])}}},na=["href"],la={__name:"RowDomain",props:["row","class"],setup(o){var t;const _=O((t=o.row.original)==null?void 0:t.domain.split(" ")),m=q(()=>{var i,l;return((i=o.row.original)==null?void 0:i.enableSSL)&&((l=o.row.original)==null?void 0:l.hasSSL)});return(i,l)=>{var f,b;return r(),k("div",{class:T(("cn"in i?i.cn:e(U))("hstack",{"[&_*]:text-gray-500 opacity-40":!((b=(f=o.row)==null?void 0:f.original)!=null&&b.isActive)},o.class))},[(r(!0),k(I,null,j(e(_),(y,d)=>(r(),k(I,{key:y==null?void 0:y.confId},[y!=="_"?(r(),k("a",{key:0,class:T(["font-semibold",e(m)?"text-green-700":"text-blue-500"]),href:`${e(m)?"https":"http"}://${y}`,target:"_blank"},B(y),11,na)):L("",!0),e(_).length-1!==d?(r(),g(e(Vt),{key:1,class:"text-gray-500 size-4 mx-1"})):L("",!0)],64))),128))],2)}}},oa={__name:"RowActions",props:["row"],emits:["update:list"],setup(o,{emit:_}){const m=_,t=O("relative flex cursor-pointer select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-inherit [&>svg]:size-4 [&>svg]:shrink-0 text-xs w-full disabled:pointer-events-none disabled:opacity-20 font-medium uppercase");return(i,l)=>{const f=J,b=me,y=ke,d=_e,w=ye,F=ge,p=Tt,x=fe,n=pe;return r(),g(n,null,{default:s(()=>[a(b,{"as-child":""},{default:s(()=>{var c,u;return[a(f,{variant:"ghost",class:T(["flex h-8 w-8 p-0 data-[state=open]:bg-muted",{"opacity-40":!((u=(c=o.row)==null?void 0:c.original)!=null&&u.isActive)}])},{default:s(()=>[a(e(et),{class:"h-4 w-4"}),l[5]||(l[5]=H("span",{class:"sr-only"},"Open Menu",-1))]),_:1,__:[5]},8,["class"])]}),_:1}),a(x,{align:"end",class:"w-[160px]"},{default:s(()=>[a(d,{"as-child":""},{default:s(()=>{var c;return[a(y,{conf:(c=o.row)==null?void 0:c.original,"onUpdate:list":l[0]||(l[0]=u=>m("update:list",u)),class:T([e(t),"flex"])},{default:s(()=>[a(e(It)),l[6]||(l[6]=h("Edit"))]),_:1,__:[6]},8,["conf","class"])]}),_:1}),a(d,{"as-child":""}),a(d,{"as-child":""},{default:s(()=>{var c,u,v,S,$,A;return[a(w,{class:T([e(t),"text-red-700"]),disabled:((u=(c=o.row)==null?void 0:c.original)==null?void 0:u.isDefault)||((S=(v=o.row)==null?void 0:v.original)==null?void 0:S.isActive),actionPayload:{id:(A=($=o.row)==null?void 0:$.original)==null?void 0:A.confId},action:"deleteSite","onUpdate:list":l[1]||(l[1]=M=>m("update:list",M))},{default:s(()=>[a(e(Ft)),l[7]||(l[7]=h("Delete"))]),_:1,__:[7]},8,["class","disabled","actionPayload"])]}),_:1}),a(F),a(d,{"as-child":""},{default:s(()=>{var c,u,v,S,$,A;return[a(w,{class:T([e(t),"text-blue-700"]),disabled:((u=(c=o.row)==null?void 0:c.original)==null?void 0:u.isDefault)||((S=(v=o.row)==null?void 0:v.original)==null?void 0:S.isActive),actionPayload:{id:(A=($=o.row)==null?void 0:$.original)==null?void 0:A.confId},action:"enableSite","onUpdate:list":l[2]||(l[2]=M=>m("update:list",M))},{default:s(()=>[a(e(Ot)),l[8]||(l[8]=h("Enable"))]),_:1,__:[8]},8,["class","disabled","actionPayload"])]}),_:1}),a(d,{"as-child":""},{default:s(()=>{var c,u,v,S,$,A;return[a(w,{class:T([e(t),"text-red-700"]),disabled:((u=(c=o.row)==null?void 0:c.original)==null?void 0:u.isDefault)||!((S=(v=o.row)==null?void 0:v.original)!=null&&S.isActive),actionPayload:{id:(A=($=o.row)==null?void 0:$.original)==null?void 0:A.confId},action:"disableSite","onUpdate:list":l[3]||(l[3]=M=>m("update:list",M))},{default:s(()=>[a(e(Nt)),l[9]||(l[9]=h("Disable"))]),_:1,__:[9]},8,["class","disabled","actionPayload"])]}),_:1}),a(F),a(d,{"as-child":""},{default:s(()=>{var c,u,v,S;return[a(w,{class:T([e(t),"text-gray-700"]),disabled:!((u=(c=o.row)==null?void 0:c.original)!=null&&u.isActive),actionPayload:{id:(S=(v=o.row)==null?void 0:v.original)==null?void 0:S.confId},action:"rebuildSite","onUpdate:list":l[4]||(l[4]=$=>m("update:list",$))},{default:s(()=>[a(e(Bt)),l[10]||(l[10]=h("Rebuild"))]),_:1,__:[10]},8,["class","disabled","actionPayload"])]}),_:1}),a(d,{"as-child":""},{default:s(()=>{var c,u;return[a(p,{to:`/certs?monitor=${(u=(c=o.row)==null?void 0:c.original)==null?void 0:u.domain}`,as:"a",class:T([e(t),"text-cyan-600"])},{default:s(()=>[a(e(Ut)),l[11]||(l[11]=h("Monitor SSL"))]),_:1,__:[11]},8,["to","class"])]}),_:1}),a(d,{"as-child":""},{default:s(()=>{var c,u;return[a(p,{to:`/certs?install=${(u=(c=o.row)==null?void 0:c.original)==null?void 0:u.domain}`,as:"a",class:T([e(t),"text-green-600"])},{default:s(()=>[a(e(zt)),l[12]||(l[12]=h("Install SSL"))]),_:1,__:[12]},8,["to","class"])]}),_:1})]),_:1})]),_:1})}}};const ia={__name:"RowConfType",props:["row","class"],setup(o){return(_,m)=>{var i,l,f,b,y,d,w;const t=ve;return r(),k("div",{class:T(("cn"in _?_.cn:e(U))("hstack justify-start space-x-2 [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:text-gray-400",(l=(i=o.row)==null?void 0:i.original)!=null&&l.isActive?null:"[&_span]:text-gray-500 opacity-40",o.class))},[(b=(f=o.row)==null?void 0:f.original)!=null&&b.confType?(r(),g(t,{key:0,hoverText:(d=(y=o.row)==null?void 0:y.original)==null?void 0:d.confType},{default:s(()=>{var F,p,x,n,c,u;return[((p=(F=o.row)==null?void 0:F.original)==null?void 0:p.confType)==="serve"?(r(),g(e(Ht),{key:1})):((n=(x=o.row)==null?void 0:x.original)==null?void 0:n.confType)==="proxy"?(r(),g(e(Pt),{key:2})):((u=(c=o.row)==null?void 0:c.original)==null?void 0:u.confType)==="redirect"?(r(),g(e(Et),{key:3})):(r(),g(e(qt),{key:4}))]}),_:1},8,["hoverText"])):L("",!0),(w=o.row.original)!=null&&w.hasSSLMonitor?(r(),g(t,{key:1,hoverText:"SSL monitoring is active"},{default:s(()=>[a(e(Lt))]),_:1})):L("",!0)],2)}}},ra={class:"w-full h-full flex-1"},ca={class:"hstack items-start justify-between"},da={class:"flex gap-2"},$a={__name:"sites",setup(o){const _=vt("/api/fetch/availableSites"),m=[{id:"isActive",accessorFn:t=>(t==null?void 0:t.isActive)===!0?"1":"0",enableHiding:!1},{accessorKey:"confType",header:"",cell:({row:t})=>P(ia,{row:t}),enableHiding:!1},{accessorKey:"confName",header:({column:t})=>P(Q,{column:t,title:"Configuration"}),cell:({row:t})=>{var i,l;return P("div",{class:["font-mono text-xs text-gray-500 truncate w-[160px]",{"opacity-40":!((i=t==null?void 0:t.original)!=null&&i.isActive)}]},(l=t==null?void 0:t.original)==null?void 0:l.confName)}},{accessorKey:"domain",header:({column:t})=>P(Q,{column:t,title:"Domains"}),cell:({row:t})=>P(la,{row:t,class:"font-mono font-medium text-xs truncate w-[180px]"})},{accessorKey:"target",header:({column:t})=>P(Q,{column:t,title:"Target"}),cell:({row:t})=>{var i,l,f;return P(ve,{class:U(["font-mono text-left text-xs text-pink-600 truncate w-[320px]",{"text-gray-500 opacity-40":!((i=t==null?void 0:t.original)!=null&&i.isActive)}]),innerText:(l=t==null?void 0:t.original)==null?void 0:l.target,hoverText:(f=t==null?void 0:t.original)==null?void 0:f.target,hoverClass:""})}},{id:"actions",cell:({row:t})=>P(oa,{row:t,"onUpdate:list":()=>_.reload.value()})}];return(t,i)=>{var p;const l=Le,f=tt,b=ke,y=ye,d=Mt,w=sa,F=Dt;return r(),k("div",ra,[H("div",ca,[a(l,{title:"Web Sites"},{default:s(()=>i[2]||(i[2]=[h("Manage or customize configuration files for your websites.")])),_:1,__:[2]}),H("div",da,[a(f,{title:"Refresh",variant:"outline",size:"sm",class:"relative hstack bg-background text-muted-foreground h-10 w-10 [&_svg]:size-4",onClick:xe((p=e(_))==null?void 0:p.reload.value,["prevent"])},{default:s(()=>[a(e(dt))]),_:1},8,["onClick"]),a(b,{"onUpdate:list":i[0]||(i[0]=()=>{var x;return(x=e(_))==null?void 0:x.reload.value()}),asChild:""},{default:s(()=>[a(f,{title:"Add Site",variant:"outline",size:"sm",class:"relative hstack bg-background text-muted-foreground h-10 w-10 [&_svg]:size-4"},{default:s(()=>[a(e(At))]),_:1})]),_:1}),a(y,{class:T(["text-gray-700"]),action:"rebuildAllSites","onUpdate:list":i[1]||(i[1]=()=>{var x;return(x=e(_))==null?void 0:x.reload.value()}),title:"Are you sure to rebuild all site configurations?",asChild:""},{default:s(()=>[a(f,{title:"Rebuild All",variant:"outline",size:"sm",class:"relative hstack bg-background text-muted-foreground h-10 w-10 [&_svg]:size-4"},{default:s(()=>[a(e(jt))]),_:1})]),_:1})])]),a(F,{class:"gap-2"},{default:s(()=>{var x,n,c,u;return[(n=(x=e(_))==null?void 0:x.isLoading)!=null&&n.value?(r(),g(d,{key:0,class:"aspect-video"})):(r(),g(w,{key:1,data:(u=(c=e(_))==null?void 0:c.result)==null?void 0:u.value,columns:m,sorting:[{id:"confName",desc:!1}]},null,8,["data"]))]}),_:1})])}}};export{$a as default};
