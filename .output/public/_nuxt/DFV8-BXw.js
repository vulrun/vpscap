import{_ as J}from"./CzZvajHs.js";import{c as E,_ as z}from"./ujrmovv1.js";import{b as C,o as b,F as Q,h as X,e as L,n as H,u as v,a as g,d as h,t as S,G as Y,v as O,g as T,w as P,c as Z,r as K,i as B,f as A,p as ee,H as ae,I as x,J as te,K as se,L as ne,M,N as re,O as ie,P as oe,Q as ce,R as le,S as ue,T as de,U as fe,A as _e,y as me}from"./CQzfIEGG.js";import{C as he}from"./B8NiJcRH.js";import{c as U}from"./C45a0SJ1.js";import{c as pe}from"./Cqh65oVF.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=U("clipboard-paste",[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=U("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),ve=["onClick"],ge={key:0,class:"malign grow-0 shrink-0 leading-normal size-7 border border-green-700 rounded-full text-white bg-green-700"},De={key:1,class:"malign grow-0 shrink-0 leading-normal size-7 border-2 border-gray-400 rounded-full text-sm font-mono font-semibold"},be={class:"text-lg font-semibold"},xe={__name:"Sidebar",props:["class","steps","statuses","active_step","onUpdate"],setup(a){const e=a;return(i,c)=>(b(),C("ol",{class:H(("cn"in i?i.cn:v(E))(["mb-6 md:mr-6 pb-6 md:pr-6 border-b md:border-b-0 md:border-r border-gray-400/50 space-y-3",e==null?void 0:e.class]))},[(b(!0),C(Q,null,X(e==null?void 0:e.steps,(t,o,s)=>{var u;return b(),C("li",{key:o,class:H(("cn"in i?i.cn:v(E))(["hstack cursor-pointer transition-all space-x-4 p-3 rounded-md border border-transparent text-gray-600",{"bg-gray-500/10 border-zinc-800/20":(e==null?void 0:e.active_step)===s}])),onClick:L(f=>e==null?void 0:e.onUpdate(s),["prevent"])},[((u=e==null?void 0:e.statuses)==null?void 0:u[o])===!0?(b(),C("div",ge,[h(v(he),{class:"size-4"})])):(b(),C("div",De,S(s+1),1)),g("span",be,S(t),1)],10,ve)}),128))],2))}},Ce={class:"flex items-center justify-between rounded-lg shadow-inner border border-gray-300 px-4 py-2 font-mono text-sm bg-gray-50"},we={__name:"CopyText",props:["textToCopy"],setup(a){const e=a,i=Y(),c=O(R),t=O((e==null?void 0:e.textToCopy)||i),o=()=>{navigator.clipboard.writeText(t.value).then(()=>{c.value=ye,setTimeout(()=>c.value=R,1e3)}).catch(s=>console.error("Failed to copy text: ",s))};return(s,u)=>{const f=z;return b(),C("div",Ce,[T(S(v(t))+" ",1),h(f,{variant:"outline",onClick:o,class:"rounded px-3 py-1 ml-2 -mr-2"},{default:P(()=>[(b(),Z(K(v(c)),{class:"size-4"}))]),_:1})])}}},Pe={key:0,class:"flex flex-col space-y-4 text-md [&_p]:text-justify [&_p]:text-gray-700"},Te={class:"text-2xl font-bold mb-3 pb-3 border-b"},ke={__name:"Content",props:["step_key","steps","active_step"],setup(a){const e=B(()=>Object.keys(a.steps).indexOf(a.step_key));return(i,c)=>{var t;return a.active_step===v(e)?(b(),C("div",Pe,[g("span",Te,S((t=a.steps)==null?void 0:t[a.step_key]),1),ee(i.$slots,"default")])):A("",!0)}}},Se={trailing:!0};function Ne(a,e=25,i={}){if(i={...Se,...i},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let c,t,o=[],s,u;const f=(p,n)=>(s=Me(a,p,n),s.finally(()=>{if(s=null,i.trailing&&u&&!t){const D=f(p,u);return u=null,D}}),s);return function(...p){return s?(i.trailing&&(u=p),s):new Promise(n=>{const D=!t&&i.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const d=i.leading?c:f(this,p);for(const y of o)y(d);o=[]},e),D?(c=f(this,p),n(c)):o.push(n)})}}async function Me(a,e,i){return await a.apply(e,i)}const Oe=a=>a==="defer"||a===!1;function Be(...a){var y;const e=typeof a[a.length-1]=="string"?a.pop():void 0;Ve(a[0],a[1])&&a.unshift(e);let[i,c,t={}]=a;const o=B(()=>ne(i));if(typeof o.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const s=ae();t.server??(t.server=!0),t.default??(t.default=Ee),t.getCachedData??(t.getCachedData=I),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=x.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,s._asyncData[o.value];const u={cause:"initial",dedupe:t.dedupe};(y=s._asyncData[o.value])!=null&&y._init||(u.cachedData=t.getCachedData(o.value,s,{cause:"initial"}),s._asyncData[o.value]=j(s,o.value,c,t,u.cachedData));const f=s._asyncData[o.value];f._deps++;const p=()=>s._asyncData[o.value].execute(u),n=t.server!==!1&&s.payload.serverRendered;{let r=function(_){const m=s._asyncData[_];m!=null&&m._deps&&(m._deps--,m._deps===0&&(m==null||m._off()))};const l=le();if(l&&n&&t.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const _=l._nuxtOnBeforeMountCbs;ue(()=>{_.forEach(m=>{m()}),_.splice(0,_.length)}),de(()=>_.splice(0,_.length))}const w=l&&(l._nuxtClientOnly||fe(pe,!1));n&&s.isHydrating&&(f.error.value||f.data.value!=null)?(f.pending.value=!1,f.status.value=f.error.value?"error":"success"):l&&(!w&&s.payload.serverRendered&&s.isHydrating||t.lazy)&&t.immediate?l._nuxtOnBeforeMountCbs.push(p):t.immediate&&p();const G=ce(),q=te([o,...t.watch||[]],([_],[m])=>{var V,$;if((_||m)&&_!==m){const W=((V=s._asyncData[m])==null?void 0:V.data.value)!==x.value;m&&r(m);const N={cause:"initial",dedupe:t.dedupe};($=s._asyncData[_])!=null&&$._init||(N.cachedData=t.getCachedData(_,s,{cause:"initial"}),s._asyncData[_]=j(s,_,c,t,N.cachedData)),s._asyncData[_]._deps++,(t.immediate||W)&&s._asyncData[_].execute(N)}else f._execute({cause:"watch",dedupe:t.dedupe})},{flush:"sync"});G&&se(()=>{q(),r(o.value)})}const D={data:k(()=>{var r;return(r=s._asyncData[o.value])==null?void 0:r.data}),pending:k(()=>{var r;return(r=s._asyncData[o.value])==null?void 0:r.pending}),status:k(()=>{var r;return(r=s._asyncData[o.value])==null?void 0:r.status}),error:k(()=>{var r;return(r=s._asyncData[o.value])==null?void 0:r.error}),refresh:(...r)=>s._asyncData[o.value].execute(...r),execute:(...r)=>s._asyncData[o.value].execute(...r),clear:()=>F(s,o.value)},d=Promise.resolve(s._asyncDataPromises[o.value]).then(()=>D);return Object.assign(d,D),d}function k(a){return B({get(){var e;return(e=a())==null?void 0:e.value},set(e){const i=a();i&&(i.value=e)}})}function Ve(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function F(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=x.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=void 0,a._asyncData[e].error.value=x.errorValue,a._asyncData[e].pending.value=!1,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function $e(a,e){const i={};for(const c of e)i[c]=a[c];return i}function j(a,e,i,c,t){var D;(D=a.payload._errors)[e]??(D[e]=x.errorValue);const o=c.getCachedData!==I,s=i,u=c.deep?O:M,f=t!=null,p=a.hook("app:data:refresh",async d=>{(!d||d.includes(e))&&await n.execute({cause:"refresh:hook"})}),n={data:u(f?t:c.default()),pending:M(!f),error:re(a.payload._errors,e),status:M("idle"),execute:(d={})=>{if(a._asyncDataPromises[e]){if(Oe(d.dedupe??c.dedupe))return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(d.cause==="initial"||a.isHydrating){const r="cachedData"in d?d.cachedData:c.getCachedData(e,a,{cause:d.cause??"refresh:manual"});if(r!=null)return a.payload.data[e]=n.data.value=r,n.error.value=x.errorValue,n.status.value="success",Promise.resolve(r)}n.pending.value=!0,n.status.value="pending";const y=new Promise((r,l)=>{try{r(s(a))}catch(w){l(w)}}).then(async r=>{if(y.cancelled)return a._asyncDataPromises[e];let l=r;c.transform&&(l=await c.transform(r)),c.pick&&(l=$e(l,c.pick)),a.payload.data[e]=l,n.data.value=l,n.error.value=x.errorValue,n.status.value="success"}).catch(r=>{if(y.cancelled)return a._asyncDataPromises[e];n.error.value=oe(r),n.data.value=v(c.default()),n.status.value="error"}).finally(()=>{y.cancelled||(n.pending.value=!1,delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=y,a._asyncDataPromises[e]},_execute:Ne((...d)=>n.execute(...d),0,{leading:!0}),_default:c.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var d;p(),(d=a._asyncData[e])!=null&&d._init&&(a._asyncData[e]._init=!1),o||ie(()=>{var y;(y=a._asyncData[e])!=null&&y._init||(F(a,e),n.execute=()=>Promise.resolve(),n.data.value=x.value)})}};return n}const Ee=()=>x.value,I=(a,e,i)=>{if(e.isHydrating)return e.payload.data[a];if(i.cause!=="refresh:manual"&&i.cause!=="refresh:hook")return e.static.data[a]},He={class:"w-full max-w-screen-ld mx-auto space-y-4"},Re={class:"hstack relative"},je={class:"w-full grid md:grid-cols-[320px_1fr] lg:grid-cols-[400px_1fr]"},qe={__name:"guide",setup(a){const{data:e,status:i,error:c,refresh:t,clear:o}=Be("prerequisite",()=>me("/api/verify")),s={install_nginx:"Install Nginx",setup_nginx:"Setup Nginx Configuration",install_pm2:"Install PM2",install_php:"Install PHP and modules"},u=_e("guide-active-index",0);function f(p){const n=Object.keys(s).length-1;u.value=Math.max(0,Math.min(p,n))}return(p,n)=>{var w;const D=J,d=z,y=xe,r=we,l=ke;return b(),C("div",He,[g("div",Re,[h(D,{title:"Welcome folks!"},{default:P(()=>n[0]||(n[0]=[T("Here's the steps, to make your server ready for the deployments!")])),_:1,__:[0]}),h(d,{variant:"outline",class:"absolute right-0 top-0 border-gray-300 shadow-xs hover:bg-transparent hover:border-gray-400",onClick:L(v(t),["prevent"])},{default:P(()=>n[1]||(n[1]=[T("Verify")])),_:1,__:[1]},8,["onClick"])]),g("div",je,[h(y,{active_step:v(u),steps:s,statuses:(w=v(e))==null?void 0:w.prerequisite,onUpdate:f},null,8,["active_step","statuses"]),h(l,{active_step:v(u),steps:s,step_key:"install_nginx"},{default:P(()=>[n[2]||(n[2]=g("p",null,[T(" Since this is our first interaction with the apt packaging system in this session, we will update our local package index so that we have access to the most recent package listings. Afterwards, we can install "),g("code",null,"nginx")],-1)),h(r,{textToCopy:"sudo apt update"}),n[3]||(n[3]=g("p",null,"Now, lets install nginx",-1)),h(r,{textToCopy:"sudo apt install nginx"}),n[4]||(n[4]=g("p",null,"Checking web server status",-1)),h(r,{textToCopy:"sudo systemctl status nginx"})]),_:1,__:[2,3,4]},8,["active_step"]),h(l,{active_step:v(u),steps:s,step_key:"setup_nginx"},{default:P(()=>[n[5]||(n[5]=g("p",null,"Lets make changes to the nginx configuration, execute the below command, to update nginx configurations",-1)),h(r,{textToCopy:"npm run tweak-nginx-conf"})]),_:1,__:[5]},8,["active_step"]),h(l,{active_step:v(u),steps:s,step_key:"install_pm2"},null,8,["active_step"]),h(l,{active_step:v(u),steps:s,step_key:"install_php"},{default:P(()=>[n[6]||(n[6]=g("p",null,[T(" Since this is our first interaction with the apt packaging system in this session, we will update our local package index so that we have access to the most recent package listings. Afterwards, we can install "),g("code",null,"nginx")],-1)),h(r,{textToCopy:"sudo apt update"}),n[7]||(n[7]=g("p",null,"Now, lets install php latest version",-1)),h(r,{textToCopy:"sudo apt install php"})]),_:1,__:[6,7]},8,["active_step"])])])}}};export{qe as default};
